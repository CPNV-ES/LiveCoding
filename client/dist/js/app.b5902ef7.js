(function(e){function t(t){for(var a,s,i=t[0],c=t[1],u=t[2],l=0,f=[];l<i.length;l++)s=i[l],r[s]&&f.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o=[];function s(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2d0a3577":"7be23f74","chunk-2d0a43df":"826105cb","chunk-2d0aa90c":"e5cb9965","chunk-2d0aab07":"3d11ad3a","chunk-2d0abc00":"7f283706","chunk-2d0ae937":"6d80902d","chunk-2d0aeb45":"77bb6e1c","chunk-2d0afa49":"f6cafe9c","chunk-2d0b2762":"3eb80639","chunk-2d0b6187":"60705860","chunk-2d0ba136":"c2ab0fe0","chunk-2d0bb267":"176df850","chunk-2d0bcec1":"d9d4b342","chunk-2d0bff92":"62de0f0e","chunk-2d0c0494":"0065452a","chunk-2d0c0a09":"1c8b5da4","chunk-2d0c1ed0":"28a2f58c","chunk-2d0c4313":"83748bfa","chunk-2d0c46d1":"7b37816c","chunk-2d0c512b":"137359a7","chunk-2d0cf16e":"1f7d624c","chunk-2d0d056d":"1321372c","chunk-2d0d0645":"1ff67e1e","chunk-2d0d2f22":"2d46f17b","chunk-2d0d7e63":"2f7df359","chunk-2d0e1b57":"eff1735d","chunk-2d0e1fbe":"4c524960","chunk-2d0e22d6":"16f4c93f","chunk-2d0e542a":"ae492a0f","chunk-2d0e57ec":"f2de30d6","chunk-2d0e6553":"5aac81b6","chunk-2d0e6c86":"608e1c8b","chunk-2d0ea098":"ce4a8b4a","chunk-2d208ac5":"083909ee","chunk-2d209408":"5bba37e8","chunk-2d20f745":"fa607cb3","chunk-2d20ff23":"5849963d","chunk-2d2138c7":"742b81c2","chunk-2d216f3b":"537dc933","chunk-2d217e5b":"1892e718","chunk-2d21b84a":"c881a93c","chunk-2d21dcd2":"1ac39739","chunk-2d21f327":"4b78d9de","chunk-2d2214b3":"195e3c76","chunk-2d221814":"2034f211","chunk-2d221a34":"2a8a8654","chunk-2d22502a":"8ec4a8af","chunk-2d228ca6":"78c56d3c","chunk-2d2295e9":"f915af09","chunk-2d22c171":"8bf26ffe","chunk-2d22c2b8":"0af9d737","chunk-2d22ca58":"5a15fef4","chunk-2d2311f7":"dc1ba2eb","chunk-2d237ee7":"bb0b1217","chunk-2d238465":"d9d37e4c","chunk-7532b3ea":"39a25a8d","chunk-774ac664":"db105340"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,a){n=r[e]=[t,a]});t.push(n[2]=a);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=s(e),o=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+a+": "+o+")");s.type=a,s.request=o,n[1](s)}r[e]=void 0}};var u=setTimeout(function(){o({type:"timeout",target:c})},12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/LiveCoding/",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("NavBar"),n("EditorBox"),n("GameBox"),n("ConsoleBox")],1)},o=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"navbar",attrs:{id:"navbar",role:"navigation","aria-label":"main navigation"}},[n("div",{staticClass:"navbar-menu"},[n("div",{staticClass:"navbar-start"},[n("EditorMenu"),n("div",{staticClass:"navbar-item"},[n("h1",{staticClass:"title is-5"},[e._v("\n          LiveCoding"+e._s(e.gameLoaded?" - "+e.gameManager.provider.gameName:"")+"\n        ")])])],1),n("div",{staticClass:"navbar-end"},[n("GameUrlInput")],1)])])},i=[],c=n("cebc"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar-item"},[n("div",{staticClass:"field is-grouped"},[n("div",{staticClass:"control"},[n("div",{staticClass:"field has-addons"},[n("p",{staticClass:"control"},[n("span",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.provider,expression:"provider"}],staticClass:"spacing",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.provider=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"github"}},[e._v("\n                GitHub\n              ")]),n("option",{attrs:{value:"url"}},[e._v("\n                URL\n              ")])])])]),n("p",{staticClass:"control has-icons-left"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"input",staticStyle:{"min-width":"300px"},attrs:{type:"text",placeholder:"URL du jeux"},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),e._m(0)]),n("p",{staticClass:"control"},[n("button",{staticClass:"button is-primary",class:{"is-loading":e.loader},on:{click:function(t){return e.load()}}},[e._v("\n            Load\n          ")])])])]),n("div",{staticClass:"control"},[n("button",{staticClass:"button is-primary",on:{click:function(t){return e.openSettingsModal()}}},[e._v("\n        Settings\n      ")])])])])},l=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small is-left"},[n("i",{staticClass:"fas fa-link"})])}],d=(n("96cf"),n("3b8d")),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[e._m(0),n("section",{staticClass:"modal-card-body"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("\n        Processor endpoint\n      ")]),n("div",{staticClass:"control has-icons-left"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.processorUrl,expression:"processorUrl"}],staticClass:"input",staticStyle:{"min-width":"60vw"},attrs:{type:"text",placeholder:"Websocket processor endpoint"},domProps:{value:e.processorUrl},on:{input:function(t){t.target.composing||(e.processorUrl=t.target.value)}}}),e._m(1)]),e._m(2)]),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("\n        Editor theme\n      ")]),n("p",{staticClass:"control has-icons-left"},[n("span",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.theme,expression:"theme"}],staticClass:"spacing",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.theme=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"vs"}},[e._v("\n              Light\n            ")]),n("option",{attrs:{value:"vs-dark"}},[e._v("\n              Dark\n            ")]),n("option",{attrs:{value:"solarized-dark"}},[e._v("\n              Solarized Dark\n            ")]),n("option",{attrs:{value:"cobalt"}},[e._v("\n              Cobalt\n            ")])])]),e._m(3)])])]),n("footer",{staticClass:"modal-card-foot"},[n("button",{staticClass:"button is-primary",on:{click:function(t){return e.$parent.close()}}},[e._v("\n      OK\n    ")])])])},m=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[e._v("\n      Settings\n    ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small is-left"},[n("i",{staticClass:"fas fa-external-link-square-alt"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"help"},[e._v("\n        L'url doit être un endpoint websockets : "),n("code",[e._v("ws://processor.com")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-left"},[n("i",{staticClass:"fas fa-palette"})])}],p={computed:{processorUrl:{get:function(){return this.$store.state.processor.url},set:function(e){this.$store.commit("UPDATE_PROCESSOR_URL",e)}},theme:{get:function(){return this.$store.state.editor.theme},set:function(e){this.$store.commit("UPDATE_EDITOR_THEME",e)}}}},h=p,g=n("2877"),v=Object(g["a"])(h,f,m,!1,null,null,null),b=v.exports,k={data:function(){return{loader:!1}},computed:{url:{get:function(){return this.$store.state.game.url},set:function(e){this.$store.commit("UPDATE_GAME_URL",e)}},provider:{get:function(){return this.$store.state.game.provider},set:function(e){this.$store.commit("UPDATE_GAME_PROVIDER",e)}}},methods:{load:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loader=!0,e.next=4,this.$store.dispatch("load");case 4:this.$snackbar.open({message:"Game loaded, ready !",type:"is-success",position:"is-top",actionText:"OK",duration:3e3}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$snackbar.open({message:"Error during game loading, see console for details",type:"is-danger",position:"is-top",actionText:"OK",duration:4500});case 10:return e.prev=10,this.loader=!1,e.finish(10);case 13:case"end":return e.stop()}},e,this,[[0,7,10,13]])}));function t(){return e.apply(this,arguments)}return t}(),openSettingsModal:function(){this.$modal.open({parent:this,component:b,hasModalCard:!0})}}},w=k,y=Object(g["a"])(w,u,l,!1,null,null,null),_=y.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar-item"},[n("div",{staticClass:"field is-grouped"},[e.gameLoaded?n("p",{staticClass:"control has-icons-left"},[n("span",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.language,expression:"language"}],staticClass:"spacing",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.language=t.target.multiple?n:n[0]}}},e._l(e.gameManager.provider.gameInterpreters,function(t,a){return n("option",{key:a,domProps:{value:a}},[e._v("\n            "+e._s(a)+"\n          ")])}),0)]),e._m(0)]):e._e(),n("div",{staticClass:"control",attrs:{title:e.gameLoaded?"Lancez l'execution de votre script !":"Aucun jeux n'est chargé !"}},[n("button",{staticClass:"button is-primary",class:{"is-loading":e.loader},attrs:{disabled:!e.gameLoaded},on:{click:e.run}},[e._m(1),n("p",[e._v("Run")])])]),e.loader?n("div",{staticClass:"control",attrs:{title:"Stoppez l'execution du script"}},[n("button",{staticClass:"button is-danger",on:{click:e.stop}},[e._m(2)])]):e._e()])])},E=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-left"},[n("i",{staticClass:"fas fa-terminal"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-left"},[n("i",{staticClass:"fas fa-play"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-left"},[n("i",{staticClass:"fas fa-stop"})])}],C=n("2f62"),O={data:function(){return{loader:!1}},computed:Object(c["a"])({},Object(C["c"])({gameLoaded:function(e){return e.game.loaded},gameManager:function(e){return e.game.manager},gameUrl:function(e){return e.game.url}}),{language:{get:function(){return this.$store.state.editor.language},set:function(e){this.$store.commit("UPDATE_EDITOR_LANGUAGE",e)}}}),methods:{openInstruction:function(e){window.open(this.gameManager.provider.generateUrl(e))},run:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loader=!0,e.next=4,this.$store.dispatch("run");case 4:e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](0),console.error("Error during process exection"),this.$snackbar.open({message:"Error during script execution, check console !",type:"is-danger",position:"is-top",actionText:"OK",duration:4500});case 10:return e.prev=10,this.loader=!1,e.finish(10);case 13:case"end":return e.stop()}},e,this,[[0,6,10,13]])}));function t(){return e.apply(this,arguments)}return t}(),stop:function(){this.$store.dispatch("stop")}}},j=O,S=Object(g["a"])(j,x,E,!1,null,null,null),R=S.exports,M={components:{GameUrlInput:_,EditorMenu:R},computed:Object(c["a"])({},Object(C["c"])({gameLoaded:function(e){return e.game.loaded},gameManager:function(e){return e.game.manager}}))},U=M,T=Object(g["a"])(U,s,i,!1,null,null,null),A=T.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"editor-box"}})},P=[],$=n("c2c6"),I=n("6e2b"),G=n("eb05"),L={computed:Object(c["a"])({},Object(C["c"])({language:function(e){return e.editor.language},theme:function(e){return e.editor.theme},fontSize:function(e){return e.editor.fontSize}}),{editorContent:{get:function(){return this.$store.getters.editorContent},set:function(e){this.$store.commit("UPDATE_EDITOR_CONTENT",e)}}}),watch:{language:function(e){this.monaco&&(window.monaco.editor.setModelLanguage(this.monaco.getModel(),e),this.monaco.getModel().setValue(this.editorContent))},theme:function(e){this.monaco&&window.monaco.editor.setTheme(e)}},mounted:function(){this.initEditor()},beforeDestroy:function(){this.editor&&this.editor.dispose()},methods:{initEditor:function(){var e=this,t={value:this.editorContent,theme:this.theme,language:this.language,fontSize:this.fontSize,fontFamily:"IBM Plex Mono",minimap:{enabled:!1}};$["editor"].defineTheme("solarized-dark",I),$["editor"].defineTheme("cobalt",G),this.monaco=$["editor"].create(document.getElementById("editor-box"),t),this.monaco.onDidChangeModelContent(function(t){var n=e.monaco.getValue();e.editorContent!==n&&(e.editorContent=n)})}}},B=L,N=Object(g["a"])(B,D,P,!1,null,null,null),z=N.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"game-box"}})},H=[],V={computed:Object(c["a"])({},Object(C["c"])({gameLoaded:function(e){return e.game.loaded}})),mounted:function(){this.$store.dispatch("console/info","Game box mounted, ready to load game !"),this.loadGame()},methods:Object(c["a"])({},Object(C["b"])({loadGame:"load"}))},W=V,F=Object(g["a"])(W,K,H,!1,null,null,null),q=F.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"console-box"}},e._l(e.messages,function(t){return n("div",{key:t.id,staticClass:"c-message",class:t.type},[n("span",[e._v("\n      ["+e._s(t.time.getHours())+":"+e._s(t.time.getMinutes())+":"+e._s(t.time.getSeconds())+"]\n    ")]),n("span",[e._v("\n      "+e._s(t.text)+"\n    ")])])}),0)},Y=[],Q={computed:Object(c["a"])({},Object(C["c"])({messages:function(e){return e.console.messages}}))},X=Q,Z=Object(g["a"])(X,J,Y,!1,null,null,null),ee=Z.exports,te={components:{NavBar:A,EditorBox:z,GameBox:q,ConsoleBox:ee}},ne=te,ae=Object(g["a"])(ne,r,o,!1,null,null,null),re=ae.exports,oe={editor:{theme:localStorage.getItem("editor-theme")||"solarized-dark",language:localStorage.getItem("editor-language")||"ruby",fontSize:14,languagesContent:{javascript:localStorage.getItem("javascript")||"let tutu = 'Bienvenue sur LiveCoding'\ndebugger.log(tutu)\n",ruby:localStorage.getItem("ruby")||"tutu = 'Bienvenue sur LiveCoding'\ndebugger.log tutu\n",php:localStorage.getItem("php")||"<?php\n$tutu = 'Bienvenue sur LiveCoding';\n$debugger->log($tutu);\n",python:localStorage.getItem("python")||"tutu = 'Bienvenue sur LiveCoding'\ndebugger.log(tutu)\n"}},processor:{url:localStorage.getItem("processor-url")||"ws://localhost:8787/"},game:{provider:localStorage.getItem("game-provider")||"url",url:localStorage.getItem("game-url")||"http://localhost:3333",loaded:!1,manager:null}},se={editorContent:function(e){return e.editor.languagesContent[e.editor.language]}},ie={UPDATE_EDITOR_CONTENT:function(e,t){localStorage.setItem(e.editor.language,t),e.editor.languagesContent[e.editor.language]=t},UPDATE_EDITOR_THEME:function(e,t){localStorage.setItem("editor-theme",t),e.editor.theme=t},UPDATE_EDITOR_LANGUAGE:function(e,t){localStorage.setItem("editor-language",t),e.editor.language=t},UPDATE_GAME_URL:function(e,t){localStorage.setItem("game-url",t),e.game.url=t},UPDATE_PROCESSOR_URL:function(e,t){localStorage.setItem("processor-url",t),e.processor.url=t},UPDATE_GAME_PROVIDER:function(e,t){localStorage.setItem("game-provider",t),e.game.provider=t},SET_GAME_MANAGER:function(e,t){e.game.manager=t,e.game.loaded=!0}},ce=n("d225"),ue=n("b0b4"),le=(n("6b54"),n("87b3"),n("6762"),n("2fdb"),n("2caf"),n("a4bb")),de=n.n(le),fe=(n("7f7f"),["javascript","python","ruby","php"]),me=function(){function e(t){Object(ce["a"])(this,e),this.manifest=t,this.formatChecked=!1}return Object(ue["a"])(e,[{key:"checkFormat",value:function(){var e=[];if("name"in this.manifest?this.manifest.name.length<1&&e.push("The manifest name key can not be empty."):e.push("The manifest must contain a name key."),"data"in this.manifest?"game"in this.manifest.data||e.push("The manifest data key must contain a game key."):e.push("The manifest must contain a data key."),"interpreters"in this.manifest?de()(this.manifest.interpreters).length<1&&e.push("The game must support at least one interpreter."):e.push("The manifest must contain a interpreters key."),e.length>0)throw new Error("The manifest format dont respect specs. Errors : ".concat(e.toString()));return this.formatChecked=!0,!0}},{key:"checkLanguages",value:function(){if(this.formatChecked){if(de()(this.manifest.interpreters).every(function(e){return fe.includes(e)}))return console.log("Tous les languanges sont suportés"),!0;throw new Error("Some specified languages are not suported by the platform, supported languages : ".concat(fe.toString()))}throw new Error("You need to check the manifest format before checking the languages !")}}]),e}(),pe=function(){function e(t){Object(ce["a"])(this,e),this.provider=t}return Object(ue["a"])(e,[{key:"loadGame",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.provider.loadManifest();case 2:return t=new me(this.provider.manifest),t.checkFormat(),t.checkLanguages(),e.next=7,this.provider.loadInterpreters();case 7:return e.next=9,this.provider.loadLibraries();case 9:return e.next=11,this.provider.loadGameClass();case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"startGame",value:function(){window.game=new this.provider.gameModule.Game(document.getElementById("game-box"),this.provider.assetsBasePath),window.gameCommandEval=eval}}]),e}(),he=(n("7514"),n("308d")),ge=n("6bb5"),ve=n("013f"),be=n("4e2b"),ke=n("bd86"),we=n("5d73"),ye=n.n(we),_e=(n("ac6a"),n("795b")),xe=n.n(_e),Ee=function(e){return new xe.a(function(t,n){var a=document.createElement("script");a.src=e,a.onload=t,a.onerror=n,document.head.appendChild(a)})},Ce=function(){function e(t){Object(ce["a"])(this,e),Object(ke["a"])(this,"url",""),Object(ke["a"])(this,"manifest",null),Object(ke["a"])(this,"interpreters",{}),Object(ke["a"])(this,"gameModule",{}),this.url=t}return Object(ue["a"])(e,[{key:"generateRawUrl",value:function(e){return"".concat(this.url,"/").concat(e)}},{key:"generateUrl",value:function(e){return"".concat(this.url,"/").concat(e)}},{key:"loadManifest",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.generateRawUrl("manifest.json"));case 3:return t=e.sent,e.next=6,t.json();case 6:return this.manifest=e.sent,e.abrupt("return",this.manifest);case 10:throw e.prev=10,e.t0=e["catch"](0),new Error("Impossible to load the game manifest, check your url, or if a manifest is present.");case 13:case"end":return e.stop()}},e,this,[[0,10]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"loadInterpreters",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(this.gameInterpreters);case 1:if((e.t1=e.t0()).done){e.next=11;break}return t=e.t1.value,e.next=5,fetch(this.generateRawUrl(this.gameInterpreters[t]));case 5:return n=e.sent,e.next=8,n.text();case 8:this.interpreters[t]=e.sent,e.next=1;break;case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"loadLibraries",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,n,a,r,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.gameLibraries){e.next=29;break}t=!0,n=!1,a=void 0,e.prev=4,r=ye()(this.gameLibraries);case 6:if(t=(o=r.next()).done){e.next=13;break}return s=o.value,e.next=10,Ee(s.cdn?s.url:this.generateRawUrl(s.url));case 10:t=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](4),n=!0,a=e.t0;case 19:e.prev=19,e.prev=20,t||null==r.return||r.return();case 22:if(e.prev=22,!n){e.next=25;break}throw a;case 25:return e.finish(22);case 26:return e.finish(19);case 27:e.next=30;break;case 29:console.info("No libraries to load");case 30:case"end":return e.stop()}},e,this,[[4,15,19,27],[20,,22,26]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"loadGameClass",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,import(this.generateRawUrl(this.manifest.data.game));case 3:return this.gameModule=e.sent,e.abrupt("return",this.gameModule);case 7:throw e.prev=7,e.t0=e["catch"](0),console.error(e.t0),new Error("Impossible to load the game class, check your url, or if the manifest is corectly configured.");case 11:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"gameName",get:function(){return this.manifest.name}},{key:"gameDescription",get:function(){return this.manifest.description}},{key:"gameInterpreters",get:function(){return this.manifest.interpreters}},{key:"gameInstructions",get:function(){return this.manifest.instructions}},{key:"gameLibraries",get:function(){return this.manifest.data.libraries}},{key:"assetsBasePath",get:function(){return"".concat(this.url,"/").concat(this.manifest.data.assets,"/")}}]),e}(),Oe=function(e){function t(){var e,n;Object(ce["a"])(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(he["a"])(this,(e=Object(ge["a"])(t)).call.apply(e,[this].concat(r))),Object(ke["a"])(Object(ve["a"])(n),"rawBaseUrl","https://cdn.jsdelivr.net/gh"),Object(ke["a"])(Object(ve["a"])(n),"defaultBaseUrl","https://github.com"),n}return Object(be["a"])(t,e),Object(ue["a"])(t,[{key:"generateRawUrl",value:function(e){return"".concat(this.rawBaseUrl,"/").concat(this.url,"/").concat(e)}},{key:"generateUrl",value:function(e){return"".concat(this.defaultBaseUrl,"/").concat(this.url,"/").concat(e)}},{key:"assetsBasePath",get:function(){return"".concat(this.rawBaseUrl,"/").concat(this.url,"/").concat(this.manifest.data.assets)}}]),t}(Ce),je=function(e){function t(){return Object(ce["a"])(this,t),Object(he["a"])(this,Object(ge["a"])(t).apply(this,arguments))}return Object(be["a"])(t,e),t}(Ce),Se=function(){function e(){Object(ce["a"])(this,e)}return Object(ue["a"])(e,null,[{key:"create",value:function(e,t){var n=this.providers.find(function(t){return t.name===e});return new n.class(t)}},{key:"providers",get:function(){return[{name:"github",class:Oe},{name:"url",class:je}]}}]),e}(),Re=function e(){Object(ce["a"])(this,e)},Me=function(){function e(t){var n=t.dispatch,a=t.processorUrl,r=t.language,o=t.interpreter,s=t.userScript;Object(ce["a"])(this,e),this.dispatch=n,this.processorUrl=a,this.language=r,this.interpreter=o,this.userScript=s}return Object(ue["a"])(e,[{key:"launchExecution",value:function(){var e=this;return new xe.a(function(t,n){e.socket=new WebSocket(e.processorUrl),e.socket.onerror=function(t){e.dispatch("console/error","Websocket connexion error."),n(t)},e.socket.close=function(n){e.dispatch("console/info","Websocket connexion closed, execution finish."),t()},e.socket.onopen=function(t){e.dispatch("console/success","Processor connected, sending data !"),e.socket.send(e.language),e.socket.onmessage=function(t){"OK"===t.data?(e.socket.send(e.interpreter),e.socket.onmessage=function(t){"OK"===t.data?(e.socket.send(e.userScript),e.socket.onmessage=function(t){"OK"===t.data?(e.dispatch("console/success","Processor successfully loaded script, launching process."),e.dispatch("console/info","Waiting for engine interactions"),e.socket.onmessage=function(t){if("close game"===t.data)e.socket.close();else{var n=window.game.executeGameCommand(t.data);e.socket.send(n)}}):e.socket.close()}):e.socket.close()}):e.socket.close()}}})}},{key:"stopExecution",value:function(){this.socket.close(4e3,"PROCESS_ENDED_BY_USER")}}]),e}(),Ue=function(){function e(){Object(ce["a"])(this,e)}return Object(ue["a"])(e,null,[{key:"create",value:function(e,t){var n=this.processorProxies.find(function(t){return t.name===e});return new n.class(t)}},{key:"processorProxies",get:function(){return[{name:"javascript",class:Re},{name:"php",class:Me},{name:"ruby",class:Me}]}}]),e}(),Te={load:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,a=t.commit,r=t.dispatch,e.prev=1,document.getElementById("game-box").innerHTML="",window.gameManager=new pe(Se.create(n.game.provider,n.game.url)),e.next=6,window.gameManager.loadGame();case 6:a("SET_GAME_MANAGER",window.gameManager),r("console/success","OK, Game loaded !"),window.gameManager.startGame(),r("console/success","OK, Game started, ready to go !"),e.next=18;break;case 12:throw e.prev=12,e.t0=e["catch"](1),console.error(e.t0),document.getElementById("game-box").innerHTML="Aucun jeu chargé !",r("console/error","Error during Game loading !"),new Error;case 18:case"end":return e.stop()}},e,null,[[1,12]])}));function t(t){return e.apply(this,arguments)}return t}(),run:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,a=t.dispatch,e.prev=1,a("console/info","Running, try to contact processor."),window.processorProxy=Ue.create(n.editor.language,{dispatch:a,processorUrl:n.processor.url,language:n.editor.language,interpreter:window.gameManager.provider.interpreters[n.editor.language],userScript:n.editor.languagesContent[n.editor.language]}),e.next=6,window.processorProxy.launchExecution();case 6:a("console/info","Process terminated !"),e.next=13;break;case 9:throw e.prev=9,e.t0=e["catch"](1),a("console/error","Error during process execution."),new Error;case 13:case"end":return e.stop()}},e,null,[[1,9]])}));function t(t){return e.apply(this,arguments)}return t}(),stop:function(e){var t=e.dispatch;t("console/info","Stopping the process."),window.processorProxy.stopExecution()}},Ae=(n("9c29"),{log:"hsl(0, 0%, 96%)",info:"#0fb9b1",warning:"#fa8231",error:"#eb3b5a",success:"#20bf6b"});function De(e){console.log("%c [".concat(e.time.getHours(),":").concat(e.time.getMinutes(),":").concat(e.time.getSeconds(),"] ").concat(e.text," "),"border-radius: 4px; background-color: ".concat(Ae[e.type],"; color: hsl(0, 0%, 14%);")),null!=e.payload&&console.log(e.payload)}var Pe={namespaced:!0,state:{messages:[]},mutations:{ADD_MESSAGE:function(e,t){t.id=crypto.getRandomValues(new Uint32Array(2)).join(),e.messages.push(t),De(t)}},actions:{log:function(e,t){var n=e.commit;n("ADD_MESSAGE",{text:t,type:"log",time:new Date})},info:function(e,t){var n=e.commit;n("ADD_MESSAGE",{text:t,type:"info",time:new Date})},success:function(e,t){var n=e.commit;n("ADD_MESSAGE",{text:t,type:"success",time:new Date})},warning:function(e,t){var n=e.commit;n("ADD_MESSAGE",{text:t,type:"warning",time:new Date})},error:function(e,t){var n=e.commit;n("ADD_MESSAGE",{text:t,type:"error",time:new Date})}}};a["default"].use(C["a"]);var $e=new C["a"].Store({modules:{console:Pe},state:oe,getters:se,mutations:ie,actions:Te,strict:!0}),Ie=n("c65b"),Ge=n.n(Ie),Le=n("8684"),Be=n.n(Le);n("c1c3");a["default"].config.productionTip=!1,a["default"].use(Ge.a),a["default"].use(Be.a),new a["default"]({store:$e,render:function(e){return e(re)}}).$mount("#app")},c1c3:function(e,t,n){}});